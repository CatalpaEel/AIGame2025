

# å¤š Agent æ´»åŠ¨ç­–åˆ’ç³»ç»Ÿ Python å®ç°æŠ€æœ¯æ–‡æ¡£

## 1. é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®é€šè¿‡è®¾è®¡å¤šä¸ªç‹¬ç«‹åä½œçš„ Agentï¼Œå®Œæˆä»æ´»åŠ¨éœ€æ±‚æå–åˆ°æœ€ç»ˆæ–‡æ¡ˆè¾“å‡ºçš„å®Œæ•´æµç¨‹ï¼Œé€‚ç”¨äºé«˜æ•ˆã€æ ‡å‡†åŒ–çš„æ´»åŠ¨ç­–åˆ’å·¥ä½œã€‚

---

## 2. ç³»ç»Ÿæ¶æ„

```plaintext
éœ€æ±‚åˆ†æAgent â†’ æ´»åŠ¨è§„åˆ’è®¾è®¡Agent â†’ é£æ ¼æå–Agent â†’ ä¸»è§†è§‰è®¾è®¡Agent â†’ æ–‡æ¡ˆåˆ›ä½œAgent â†’ åè°ƒä¸è´¨æ§Agent
```

æ¯ä¸ª Agent ä½œä¸ºç‹¬ç«‹æ¨¡å—ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œå½¼æ­¤é€šè¿‡æ•°æ®ä¼ é€’è¿æ¥ã€‚

---

## 3. æŠ€æœ¯é€‰å‹

- Python 3.11+
- Pydanticï¼ˆæ•°æ®æ ¡éªŒï¼‰
- FastAPIï¼ˆå¯é€‰ï¼Œè‹¥è¦åšæœåŠ¡åŒ–ï¼‰
- asyncioï¼ˆæ”¯æŒå¼‚æ­¥æ‰§è¡Œï¼‰
- loggingï¼ˆæ—¥å¿—è®°å½•ï¼‰
- typingï¼ˆç±»å‹æç¤ºï¼‰

---

## 4. ç›®å½•ç»“æ„

```plaintext
project_root/
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ base.py
â”‚   â”œâ”€â”€ demand_analyzer.py
â”‚   â”œâ”€â”€ event_planner.py
â”‚   â”œâ”€â”€ style_extractor.py
â”‚   â”œâ”€â”€ visual_designer.py
â”‚   â”œâ”€â”€ copywriter.py
â”‚   â”œâ”€â”€ coordinator.py
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ event.py
â”‚   â”œâ”€â”€ visual_style.py
â”‚   â”œâ”€â”€ document.py
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ logger.py
â”‚   â””â”€â”€ validator.py
â”œâ”€â”€ main.py
â”œâ”€â”€ README.md
â””â”€â”€ requirements.txt
```

---

## 5. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 5.1 BaseAgent (agents/base.py)

æ‰€æœ‰ Agent ç»§æ‰¿çš„åŸºç±»ï¼Œç»Ÿä¸€æ¥å£è§„èŒƒã€‚

```python
from abc import ABC, abstractmethod

class BaseAgent(ABC):
    @abstractmethod
    def run(self, input_data):
        """æ‰§è¡Œä¸»è¦é€»è¾‘"""
        pass
```

---

### 5.2 éœ€æ±‚åˆ†æ Agent (agents/demand\_analyzer.py)

æå–å’Œè¡¥å…¨æ´»åŠ¨éœ€æ±‚ã€‚

```python
from .base import BaseAgent
from models.event import EventRequirement

class DemandAnalyzerAgent(BaseAgent):
    def run(self, input_data: dict) -> EventRequirement:
        # è§£æè¾“å…¥ä¿¡æ¯ï¼Œæ¨æ–­éœ€æ±‚
        # è¿”å›æ ‡å‡†åŒ–éœ€æ±‚å¯¹è±¡
        ...
```

---

### 5.3 æ´»åŠ¨è§„åˆ’è®¾è®¡ Agent (agents/event\_planner.py)

åŸºäºéœ€æ±‚åˆ¶å®šè¯¦ç»†æ´»åŠ¨æµç¨‹ä¸èµ„æºéœ€æ±‚ã€‚

```python
from .base import BaseAgent
from models.event import EventPlan

class EventPlannerAgent(BaseAgent):
    def run(self, requirement: EventRequirement) -> EventPlan:
        # æ ¹æ®ç±»å‹å’Œéœ€æ±‚è®¾è®¡æ´»åŠ¨è®¡åˆ’
        ...
```

---

### 5.4 é£æ ¼æå– Agent (agents/style\_extractor.py)

æå–å“ç‰Œè§†è§‰é£æ ¼å…ƒç´ ã€‚

```python
from .base import BaseAgent
from models.visual_style import VisualStyleGuide

class StyleExtractorAgent(BaseAgent):
    def run(self, references: list[str]) -> VisualStyleGuide:
        # ä»å‚è€ƒèµ„æ–™æå–é£æ ¼ç‰¹å¾
        ...
```

---

### 5.5 ä¸»è§†è§‰è®¾è®¡ Agent (agents/visual\_designer.py)

åŸºäºé£æ ¼æŒ‡å—ä¸æ´»åŠ¨å†…å®¹ï¼Œåˆ¶ä½œè§†è§‰æ–¹æ¡ˆã€‚

```python
from .base import BaseAgent
from models.visual_style import VisualDesign

class VisualDesignerAgent(BaseAgent):
    def run(self, plan: EventPlan, style_guide: VisualStyleGuide) -> VisualDesign:
        # åˆ¶ä½œä¸»è§†è§‰è®¾è®¡
        ...
```

---

### 5.6 æ–‡æ¡ˆåˆ›ä½œ Agent (agents/copywriter.py)

ç”Ÿæˆç¬¦åˆé£æ ¼ä¸å†…å®¹çš„å®£ä¼ æ–‡æ¡ˆã€‚

```python
from .base import BaseAgent
from models.document import PromotionCopy

class CopywriterAgent(BaseAgent):
    def run(self, plan: EventPlan, style_guide: VisualStyleGuide) -> PromotionCopy:
        # ç”Ÿæˆæ–‡æ¡ˆ
        ...
```

---

### 5.7 åè°ƒä¸è´¨æ§ Agent (agents/coordinator.py)

ç»Ÿä¸€è°ƒåº¦æ‰€æœ‰ Agentï¼Œæ£€æµ‹å¹¶ä¿®æ­£è¾“å‡ºã€‚

```python
from .base import BaseAgent

class CoordinatorAgent:
    def __init__(self, agents: list[BaseAgent]):
        self.agents = agents

    def execute_pipeline(self, raw_input: dict):
        # æŒ‰é¡ºåºè°ƒç”¨å„ä¸ª Agent
        ...
```

---

## 6. æ•°æ®æ¨¡å‹è®¾è®¡ï¼ˆmodels/ï¼‰

æ‰€æœ‰æ¨¡å—è¾“å…¥è¾“å‡ºçš„æ•°æ®æ ¼å¼ï¼š

- `EventRequirement`ï¼šæ´»åŠ¨éœ€æ±‚ç»†èŠ‚
- `EventPlan`ï¼šå®Œæ•´çš„æ´»åŠ¨ç­–åˆ’æ–¹æ¡ˆ
- `VisualStyleGuide`ï¼šå“ç‰Œé£æ ¼æŒ‡å—
- `VisualDesign`ï¼šä¸»è§†è§‰è®¾è®¡å†…å®¹
- `PromotionCopy`ï¼šå®£ä¼ æ–‡æ¡ˆå†…å®¹

ä½¿ç”¨ Pydantic å®šä¹‰ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ã€‚

---

## 7. æ—¥å¿—ä¸å¼‚å¸¸å¤„ç†ï¼ˆutils/logger.pyï¼‰

ç»Ÿä¸€æ—¥å¿—è¾“å‡ºï¼Œè®°å½•æ¯ä¸ª Agent çš„è¿è¡Œè¿‡ç¨‹ä¸é”™è¯¯ä¿¡æ¯ã€‚

---

## 8. ä¸»ç¨‹åºå…¥å£ï¼ˆmain.pyï¼‰

```python
from agents import (
    DemandAnalyzerAgent,
    EventPlannerAgent,
    StyleExtractorAgent,
    VisualDesignerAgent,
    CopywriterAgent,
    CoordinatorAgent,
)

def main():
    coordinator = CoordinatorAgent([
        DemandAnalyzerAgent(),
        EventPlannerAgent(),
        StyleExtractorAgent(),
        VisualDesignerAgent(),
        CopywriterAgent(),
    ])
    
    input_data = {...}  # åˆå§‹è¾“å…¥
    coordinator.execute_pipeline(input_data)

if __name__ == "__main__":
    main()
```

---

# ğŸ”¥ å¤‡æ³¨

- å¦‚æœæƒ³è®© Agent æ”¯æŒã€Œå¼‚æ­¥å¹¶å‘å¤„ç†ã€ï¼ˆæ¯”å¦‚é£æ ¼æå–å’Œéœ€æ±‚è§„åˆ’å¯ä»¥å¹¶è¡Œï¼‰ï¼Œå¯ä»¥ç”¨ `asyncio`ã€‚
- å¦‚æœæƒ³åšæˆ Web æœåŠ¡ï¼Œå¯ä»¥ç”¨ FastAPI æš´éœ²æ¥å£ï¼Œæ¯”å¦‚ `/generate_event_plan`ã€‚
- å¦‚æœéœ€è¦è®© Agent æ›´ã€Œæ™ºèƒ½ã€ï¼ˆæ¨æ–­+è‡ªçº é”™ï¼‰ï¼Œå¯ä»¥é›†æˆè½»é‡å‹è§„åˆ™å¼•æ“æˆ– LLM è°ƒç”¨ã€‚

---
