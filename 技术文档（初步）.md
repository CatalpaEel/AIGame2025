

# 多 Agent 活动策划系统 Python 实现技术文档

## 1. 项目概述

本项目通过设计多个独立协作的 Agent，完成从活动需求提取到最终文案输出的完整流程，适用于高效、标准化的活动策划工作。

---

## 2. 系统架构

```plaintext
需求分析Agent → 活动规划设计Agent → 风格提取Agent → 主视觉设计Agent → 文案创作Agent → 协调与质控Agent
```

每个 Agent 作为独立模块，提供统一的接口，彼此通过数据传递连接。

---

## 3. 技术选型

- Python 3.11+
- Pydantic（数据校验）
- FastAPI（可选，若要做服务化）
- asyncio（支持异步执行）
- logging（日志记录）
- typing（类型提示）

---

## 4. 目录结构

```plaintext
project_root/
├── agents/
│   ├── base.py
│   ├── demand_analyzer.py
│   ├── event_planner.py
│   ├── style_extractor.py
│   ├── visual_designer.py
│   ├── copywriter.py
│   ├── coordinator.py
├── models/
│   ├── event.py
│   ├── visual_style.py
│   ├── document.py
├── utils/
│   ├── logger.py
│   └── validator.py
├── main.py
├── README.md
└── requirements.txt
```

---

## 5. 核心模块设计

### 5.1 BaseAgent (agents/base.py)

所有 Agent 继承的基类，统一接口规范。

```python
from abc import ABC, abstractmethod

class BaseAgent(ABC):
    @abstractmethod
    def run(self, input_data):
        """执行主要逻辑"""
        pass
```

---

### 5.2 需求分析 Agent (agents/demand\_analyzer.py)

提取和补全活动需求。

```python
from .base import BaseAgent
from models.event import EventRequirement

class DemandAnalyzerAgent(BaseAgent):
    def run(self, input_data: dict) -> EventRequirement:
        # 解析输入信息，推断需求
        # 返回标准化需求对象
        ...
```

---

### 5.3 活动规划设计 Agent (agents/event\_planner.py)

基于需求制定详细活动流程与资源需求。

```python
from .base import BaseAgent
from models.event import EventPlan

class EventPlannerAgent(BaseAgent):
    def run(self, requirement: EventRequirement) -> EventPlan:
        # 根据类型和需求设计活动计划
        ...
```

---

### 5.4 风格提取 Agent (agents/style\_extractor.py)

提取品牌视觉风格元素。

```python
from .base import BaseAgent
from models.visual_style import VisualStyleGuide

class StyleExtractorAgent(BaseAgent):
    def run(self, references: list[str]) -> VisualStyleGuide:
        # 从参考资料提取风格特征
        ...
```

---

### 5.5 主视觉设计 Agent (agents/visual\_designer.py)

基于风格指南与活动内容，制作视觉方案。

```python
from .base import BaseAgent
from models.visual_style import VisualDesign

class VisualDesignerAgent(BaseAgent):
    def run(self, plan: EventPlan, style_guide: VisualStyleGuide) -> VisualDesign:
        # 制作主视觉设计
        ...
```

---

### 5.6 文案创作 Agent (agents/copywriter.py)

生成符合风格与内容的宣传文案。

```python
from .base import BaseAgent
from models.document import PromotionCopy

class CopywriterAgent(BaseAgent):
    def run(self, plan: EventPlan, style_guide: VisualStyleGuide) -> PromotionCopy:
        # 生成文案
        ...
```

---

### 5.7 协调与质控 Agent (agents/coordinator.py)

统一调度所有 Agent，检测并修正输出。

```python
from .base import BaseAgent

class CoordinatorAgent:
    def __init__(self, agents: list[BaseAgent]):
        self.agents = agents

    def execute_pipeline(self, raw_input: dict):
        # 按顺序调用各个 Agent
        ...
```

---

## 6. 数据模型设计（models/）

所有模块输入输出的数据格式：

- `EventRequirement`：活动需求细节
- `EventPlan`：完整的活动策划方案
- `VisualStyleGuide`：品牌风格指南
- `VisualDesign`：主视觉设计内容
- `PromotionCopy`：宣传文案内容

使用 Pydantic 定义，确保类型安全。

---

## 7. 日志与异常处理（utils/logger.py）

统一日志输出，记录每个 Agent 的运行过程与错误信息。

---

## 8. 主程序入口（main.py）

```python
from agents import (
    DemandAnalyzerAgent,
    EventPlannerAgent,
    StyleExtractorAgent,
    VisualDesignerAgent,
    CopywriterAgent,
    CoordinatorAgent,
)

def main():
    coordinator = CoordinatorAgent([
        DemandAnalyzerAgent(),
        EventPlannerAgent(),
        StyleExtractorAgent(),
        VisualDesignerAgent(),
        CopywriterAgent(),
    ])
    
    input_data = {...}  # 初始输入
    coordinator.execute_pipeline(input_data)

if __name__ == "__main__":
    main()
```

---

# 🔥 备注

- 如果想让 Agent 支持「异步并发处理」（比如风格提取和需求规划可以并行），可以用 `asyncio`。
- 如果想做成 Web 服务，可以用 FastAPI 暴露接口，比如 `/generate_event_plan`。
- 如果需要让 Agent 更「智能」（推断+自纠错），可以集成轻量型规则引擎或 LLM 调用。

---
